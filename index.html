<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Text Analyser</title>
  <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- bootstrap core, font awesome, datatables bs4-styled css -->
  <link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css" >
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.10.24/datatables.min.css" />

  <!-- additional app styling -->
  <link rel="stylesheet" type="text/css" href="css/style.css?v=4" />

  <!-- jquery core, bootstrap js (includes popper) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- jquery highlight plugin, datatables concatenated js (core + bootstrap) -->
  <script src="js/jquery.highlight.js"></script>
  <script src="https://cdn.datatables.net/v/bs4/dt-1.10.24/datatables.min.js"></script>

  <!-- datatables plugins: search highlight, scroll resize  -->
  <script
    src="https://cdn.datatables.net/plug-ins/1.10.24/features/searchHighlight/dataTables.searchHighlight.min.js"></script>
  <script
    src="https://cdn.datatables.net/plug-ins/1.10.24/features/scrollResize/dataTables.scrollResize.min.js"></script>
</head>

<body>
  <header>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
      <a href="#" class="navbar-brand" data-slides-target="0">
        <img src="img/brain-logo.png" width="30" height="30" class="d-inline-block align-top" alt="" loading="lazy">
        Text Analyser
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavMarkup"
        aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse mt-2 mt-md-0" id="navbarNavMarkup" style="z-index: 20;">
        <div class="navbar-nav ml-auto">
          <a id="nav-affective" data-slides-target="0" class="nav-item nav-link active" href="#">Affective Lexicon</a>
          <a id="nav-sttr" data-slides-target="1" class="nav-item nav-link" href="#">Type Token Ratio</a>
        </div>
      </div>
    </nav>
  </header>

  <main role="main">

    <div class="container-xl slides" data-slide-index="0">
      <div class="row my-2 text-center">
        <div class="col-12">
          <h4>Internal Mental Conditions</h4>
        </div>
      </div>
      <div id="resize_wrapper">
        <table id="tbl" class="table table-striped" style="width: 100% !important;">
          <thead class="text-light bg-info">
            <tr>
              <th>Words & Synonyms
                <div class="col-6 col-md-4 col-lg-3 px-0 float-right">
                  <input type="search" id="th-search-box" class="form-control form-control-sm"
                    placeholder="Search..." />
                </div>
              </th>
            </tr>
          </thead>
        </table>
      </div>
      <button type="button" class="btn btn-dark fab" title="Help" data-toggle="modal" data-target="#lexicon-modal">
        <i class="fas fa-info"></i>
      </button>
    </div>

    <div class="modal" id="lexicon-modal" tabindex="-1" aria-labelledby="lexicon-modal-label" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">About</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>This simple app has been developed to aid information science and psychology researchers. All words in the
              lexicon have been obtained from the following study:</p>
            <p style="text-indent: -25px; padding-left: 25px;">Ortony, A., Clore, G. L., & Foss, M. A. (1987). The Referential
              Structure of the Affective Lexicon. <span class="font-italic">Cognitive Science, 11</span>(3), 341-364. <a
                href="https://doi.org/10.1207/s15516709cog1103_4">https://doi.org/10.1207/s15516709cog1103_4</a></p>
            <p>Synonyms for each word have been collected from two dictionaries so that it is easier to look up if similar
              words exist in the lexicon.</p>
            <h5>How to use</h5>
            <p>Just start typing any word in the search box and the table will continuously filter and highlight any matching
              rows.</p>
            <h5>Credits</h5>
            <p>Synonym Set 1 is sourced from <a href="https://www.datamuse.com/api/">Datamuse</a> project, which is based on
              <a href="https://wordnet.princeton.edu/">WordNet</a> lexical database.</p>
            <p>Synonyms Set 2 is obtained from <a
                href="https://www.merriam-webster.com/shop-dictionaries/thesauruses/collegiate-thesaurus">Merriam-Webster's
                Collegiate&reg; Thesaurus</a>.</p>
            <p>Copyrights of all data belong to respective projects.</p>
            <h5>Software</h5>
            <p>Following free software libraries have been utilized</p>
            <ul>
              <li><a href="https://getbootstrap.com/">Bootstrap</a></li>
              <li><a href="https://jquery.com/">jQuery</a></li>
              <li><a href="https://datatables.net/">Datatables</a></li>
              <li><a href="https://bartaz.github.io/sandbox.js/jquery.highlight.html">jQuery Highlight Plugin</a></li>
            </ul>
            <h5>Graphics</h5>
            <p><a href="https://iconarchive.com/show/medical-health-icons-by-graphicloads/human-brain-icon.html">Logo
                Image</a> and <a href="https://emojipedia.org/twitter/twemoji-2.5/brain/">Favicon</a></p>
          </div>
        </div>
      </div>
    </div>

    <div class="container-xl slides" data-slide-index="1">
      <div class="row my-3 mb-md-4 text-center">
        <div class="col-12">
          <h4>Mean Segmental TTR calculator</h4>
        </div>
      </div>

      <form id="sttr-form">
        <div class="row">
          <label for="corpus-textarea" class="form-control-lg col-form-label col-9 col-sm-6 ">Text to analyze</label>
          <div class="col-12 col-sm-6 ml-auto text-right mb-1">
            <button class="btn btn-info" type="button" id="browse-button"><i class="far fa-folder-open"></i> Browse</button>
            <button class="btn btn-warning" type="button" id="clear-button"><i class="far fa-trash-alt"> </i> Clear</button>
            <input type="file" id="corpus-input" accept="text/plain" class="d-none" />
          </div>
        </div>
        <textarea class="form-control" id="corpus-textarea" name="corpus-textarea" rows="10"
          placeholder="Paste the text to analyze &#10;or click 'Browse' to choose a text file." required></textarea>
        <small class="form-text text-muted">Token Count: <span id="corpus-tokencount">0</span></small>
        <div class="form-group my-3 row">
          <label for="segment-size" class="col-6 col-form-label text-sm-right">Segment Size: </label>
          <div class="col-6 col-sm-4 col-md-2">
            <input type="number" class="form-control" min="50" value="200" id="segment-size"
              name="segment-size" required>
            </div>
        </div>
        <div class="form-group mb-3 row">
          <label for="hyphen-behav-op1" class="col-6 col-form-label text-sm-right">Treat hyphenated words as</label>
          <div class="col-6 col-sm-4 col-md-3 my-auto">
            <div class="custom-control custom-control-inline custom-radio">
              <input class="form-check-input custom-control-input" type="radio" name="hyphen-behav"
                id="hyphen-behav-op1" value="single">
              <label class="form-check-label custom-control-label" for="hyphen-behav-op1">a single token</label>
            </div>
            <div class="custom-control custom-control-inline custom-radio">
              <input class="form-check-input custom-control-input" type="radio" name="hyphen-behav"
                id="hyphen-behav-op2" checked value=" multiple">
              <label class="form-check-label custom-control-label" for="hyphen-behav-op2">multiple tokens</label>
            </div>
          </div>
        </div>
        <div class="form-group my-4 row">
          <div class="col-12 text-center">
            <button class="btn btn-primary btn-lg" id="analyze-button" type="submit">Submit</button>
          </div>
        </div>
        <hr class="my-4 col-9 col-sm-6" />
        <div class="form-group mt-4 mb-3 row">
          <label for="sttr-results" class="col-6 col-form-label form-control-lg text-sm-right">MSTTR Results</label>
          <div class="col-6 col-sm-4 col-md-2">
            <input type="text" class="form-control form-control-lg" id="sttr-results" name="sttr-results" readonly>
            <small class="form-text text-muted">Segment Count: <span id="segment-count"></span></small>
          </div>
        </div>
      </form>
      <button type="button" class="btn btn-dark fab" title="Help" data-toggle="modal" data-target="#ttr-modal">
        <i class="fas fa-info"></i>
      </button>
    </div>

    <div class="modal" id="ttr-modal" tabindex="-1" aria-labelledby="ttr-modal-label" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">About</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>Type-Token Ratio (TTR) is a well-known measure of lexical diversity. It is calculated as ratio of different words (<em>types</em>) to total words (<em>tokens</em>) in a sample text. Raw TTR is not useful for comparing different texts since it varies with sample size. As the sample size increases, the TTR drops. One solution to this problem is standardizing the sample size. However, to date, the research community has not been able to agree upon a standard sample size.</p>
            <p>Segmentation has been proposed as a better solution for calculating TTR across texts with different sample sizes. It involves dividing the sample text into segments of equal sizes, say 200 words, and calculating TTR on each segment. In the end, an average of all those TTR values is calculated. This is termed as Mean Segmental TTR (MSTTR) or Standardized TTR (STTR).</p>
            <h5>How to use this app</h5>
            <p>It is recommended that analysis be performed in two steps.</p>
            <h6>Step1: Manual Filtering</h6>
            <p>The user should manually read through the text and:</p>
            <ul>
              <li>decide how hyphenated words should be treated (as one token or multiple).</li>
              <li>remove all non-textual elements like URLs, emails, emojis, bullet points, heading numbers, cross-references, citations etc.</li>
              <li>remove dots from numbers with decimal points otherwise they will be treated as multiple tokens.</li>
              <li>remove numbers for numbered lists (app can take care of bulleted lists).</li>
              <li>combine together words which are written separately, but are being used as a single term (e.g. <em>a priori</em>)</li>
            </ul>
            <h6>Step 2: Automated analysis</h6>
            <p>Once the text had been manually reviewed, it can be directly copy-pasted in the input box or users can choose to upload a text file (*.txt) instead. The app removes <u>all kinds of punctuation</u> from the text and then counts the total number of tokens. Number of tokens is displayed below the text box &mdash; it is updated live as the text changes. User gets the option to choose the segment size (200 by default) and hyphenation behavior.</p>
            <p>Upon clicking Submit, the app divides the text into segments of equal length, discards the last segment if its length is smaller than segment size, calculates TTR for each segment and finally computes an average TTR over all segments.</p>
          </div>
        </div>
      </div>
    </div>

  </main>

  <script>
    jQuery(_ => {
      // Enable navbar view switching
      $('.navbar-brand, .nav-item').click(e => {
          e.preventDefault();
          targetIndex = $(e.target).data().slidesTarget;
          $('.navbar-collapse').collapse('hide');
          $('div.slides').hide(0, _ => {
            $(`div.slides[data-slide-index="${targetIndex}"]`).show(0, _ => $(window).resize());
            $('a.nav-item').removeClass('active');
            $(`a.nav-item:eq(${targetIndex})`).addClass('active');
          });
      });

      // Only show 1st view in the beginning
      $('.navbar-nav .nav-item').eq(0).trigger('click');
    });
  </script>
  <script src="js/syns.js?v=1"></script> <!-- affective lexicon dataset -->
  <script src="js/affective.js?v=1"></script>
  <script src="js/sttr.js?v=2"></script>
</body>

</html>